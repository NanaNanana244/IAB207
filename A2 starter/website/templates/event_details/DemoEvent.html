{% extends "base.html" %}

{% block title %}Event Detail{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='Style/EventDetailStyle.css') }}">
{% endblock %}

{% block content %}
<!-- Event image -->
<div class="event-image position-relative">
    <img src="{{ url_for('static', filename='Image/Display events/Twice concert.png') }}" class="d-block w-100">
    <div class="carousel-caption d-flex justify-content-center align-items-center h-100">
        <div class="bg-black bg-opacity-75 text-center" style="padding: 50px; border-radius: 50px">
            <h1>TWICE WORLD TOUR</h1>
        </div>
    </div>
</div>
<!-- Event details -->
<div class="container mt-4">
    <div class="row mb-5">
        <!-- Left Column: Ticket Panel -->
        <div class="col-md-4">
            <div class="card shadow-sm">
                <div class="card-body">
                    <h5 class="card-title">Ticket Information</h5>
                    <p><strong>Venue:</strong> Rod Laver Arena, Melbourne, VIC</p>
                    <p><strong>Date:</strong> 8/11/2025</p>
                    <p><strong>Time:</strong> 7:30 PM</p>
                    <h6>Ticket Types Available:</h6>
                    <div class="accordion" id="ticketAccordion">
                        <!-- Normal Tickets -->
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingNormal">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseNormal" aria-expanded="false" aria-controls="collapseNormal">
                                    Normal Tickets (Available: 100)
                                </button>
                            </h2>
                            <div id="collapseNormal" class="accordion-collapse collapse" aria-labelledby="headingNormal">
                                <div class="accordion-body pb-0">
                                    <p><strong>Ticket Price:</strong> $200</p>
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <div class="d-flex align-items-center">
                                            <button class="btn btn-outline-secondary btn-sm me-2" onclick="decreaseQty('ticketQtyNormal')">-</button>
                                            <input type="text" id="ticketQtyNormal" class="form-control text-center" value="1" style="width: 60px;" readonly>
                                            <button class="btn btn-outline-secondary btn-sm ms-2" onclick="increaseQty('ticketQtyNormal')">+</button>
                                        </div>
                                        <a href="#" class="btn btn-success ms-3" data-bs-toggle="modal" data-bs-target="#checkoutModal">Buy Tickets</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- VIP Tickets -->
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingVip">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseVip" aria-expanded="false" aria-controls="collapseVip">
                                    VIP Tickets (Available: 20)
                                </button>
                            </h2>
                            <div id="collapseVip" class="accordion-collapse collapse" aria-labelledby="headingVip">
                                <div class="accordion-body pb-0">
                                    <p><strong>Ticket Price:</strong> $300</p>
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <div class="d-flex align-items-center">
                                            <button class="btn btn-outline-secondary btn-sm me-2" onclick="decreaseQty('ticketQtyVip')">-</button>
                                            <input type="text" id="ticketQtyVip" class="form-control text-center" value="1" style="width: 60px;" readonly>
                                            <button class="btn btn-outline-secondary btn-sm ms-2" onclick="increaseQty('ticketQtyVip')">+</button>
                                        </div>
                                        <a href="#" class="btn btn-success ms-3" data-bs-toggle="modal" data-bs-target="#checkoutModal">Buy Tickets</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Checkout Modal -->
        <div class="modal fade" id="checkoutModal" tabindex="-1" aria-labelledby="checkoutModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="checkoutModalLabel">Confirm Booking</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p><strong>Event:</strong> TWICE WORLD TOUR</p>
                        <p><strong>Tickets:</strong> Normal: 1, VIP: 1</p>
                        <p><strong>Total:</strong> $500</p>
                        <p>Please review your booking details before confirming.</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <!-- Confirm Booking triggers Thank You Modal -->
                        <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#thankYouModal" data-bs-dismiss="modal">Confirm Booking</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Thank You Modal -->
        <div class="modal fade" id="thankYouModal" tabindex="-1" aria-labelledby="thankYouModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content text-center">
                    <div class="modal-body">
                        <h5 class="mb-3">Thank You for Your Purchase!</h5>
                        <p>A confirmation email will be sent to you shortly.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Column: Event Details -->
        <div class="col-md-8">
            <div class="card border-0">
                <div class="card-body">
                    <h5 class="card-title">Event Details</h5>
                    <p>
                        <strong>Presented by:</strong> Live Nation
                    </p>
                    <p>
                        K-Pop superstars TWICE recently embarked on their new, sixth world tour <strong>THIS IS FOR</strong>, and now comes the exciting news that Australian fans have been waiting for!
                    </p>
                    <p>
                        Presented by Live Nation, the Australian leg of World Tour <strong>THIS IS FOR</strong> includes 2 shows for Sydney's Qudos Bank Arena on November 1 and 2, followed by another 2 dates in Melbourne at Rod Laver Arena on November 8 and 9.
                    </p>
                    <p>
                        For this sixth world tour, TWICE will perform on 360-degree stages at every stop, removing the traditional barrier between the artist and audience. By transforming the entire venue into a fully immersive space, fans will experience TWICE's performances from all angles—visually and sonically—setting a new standard for K-pop concert production.
                    </p>
                    <p>
                        TWICE released their 4th full-length album, '<strong>THIS IS FOR</strong>', on July 11. They are also slated to headline Lollapalooza Chicago on August 2, further cementing their status as a global artist. With new music and a massive world tour ahead, TWICE is set to heat up the summer and captivate audiences worldwide once again.
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Comment Section -->
<div class="container">
    <h3>Comments</h3>
    <div class="mb-3">
        <textarea id="commentInput" class="form-control" rows="3" placeholder="Write your comment here..."></textarea>
    </div>
    <div class="text-end mb-3">
        <button class="btn btn-success" onclick="addComment()">Submit Comment</button>
    </div>

    <!-- Comments list -->
    <div id="commentsList" class="mt-4">
        <div class="card mb-2">
            <div class="card-body d-flex align-items-start">
                <img src="{{ url_for('static', filename='Image/NavBar Icons/account.png') }}" class="rounded-circle me-3" style="width:40px; height:40px">
                <div class="pt-2">
                    <p class="m-0"><strong>TWICE BIGGEST FAN:</strong> I can't wait to see them!</p>
                </div>
            </div>
        </div>

        <div class="card mb-2">
            <div class="card-body d-flex align-items-start">
                <img src="{{ url_for('static', filename='Image/NavBar Icons/account.png') }}" class="rounded-circle me-3" style="width:40px; height:40px;">
                <div class="pt-2">
                    <p class="m-0"><strong>SEAL THE HONMOON!:</strong> The concert will be fire!</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Add comment script -->
<script>
function addComment() {
    const commentInput = document.getElementById('commentInput');
    const commentText = commentInput.value.trim();
    if(commentText === '') return; // Don't add empty comments

    const commentsList = document.getElementById('commentsList');

    // Create new comment card
    const newComment = document.createElement('div');
    newComment.classList.add('card', 'mb-2');
    newComment.innerHTML = `
        <div class="card-body d-flex align-items-start">
            <img src="{{ url_for('static', filename='Image/account.png') }}" class="rounded-circle me-3" style="width:40px; height:40px">
            <div class="pt-2">
                <p class="m-0"><strong>You:</strong> ${commentText}</p>
            </div>
        </div>
    `;

    // Append new comment and clear textarea
    commentsList.appendChild(newComment);
    commentInput.value = '';
}
</script>
<!-- Increase/Decrease ticket number -->
<script>
function increaseQty(inputId) {
    let input = document.getElementById(inputId);
    input.value = parseInt(input.value) + 1;
}

function decreaseQty(inputId) {
    let input = document.getElementById(inputId);
    if (parseInt(input.value) > 1) {
        input.value = parseInt(input.value) - 1;
    }
}
</script>
{% endblock %}