{% extends "base.html" %}

{% from 'bootstrap5/form.html' import render_form %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='style/ErrorStyle.css') }}">
{% endblock %}

{% block content %}

<!-- Order details display -->
<div class="d-flex justify-content-center my-5">
    <div class="card p-4"
        style="min-height:564px; max-width: 600px; width: 100%; border: #cd98fb solid 2px; border-radius: 15px;">
        <div class="row">
            <div class="col-sm-12 mt-3">
                <h1 class="text-center">Order Details</h1>
                <p class="text-center">Thank you for using Kpop Event Ticket!</p>
                <div class="d-grid gap-2 col-8 mx-auto mt-4">
                    <!-- Details of event -->
                    <h5 class="text-start">Event: {{ order.event.title }}</h5>
                    <h5 class="text-start">Order ID: #{{ "%06d"|format(order.orderid) }}</h5>
                    <h5 class="text-start">Venue: {{ order.event.location }}, {{ order.event.country.title() }}</h5>
                    <h5 class="text-start">Date: {{ order.event.date.strftime('%d/%m/%Y') if order.event.date else 'TBA' }}</h5>
                    <h5 class="text-start">Time: {{ order.event.startTime.strftime('%I:%M %p') if order.event.startTime else 'TBA' }}</h5>
                    <h5 class="text-start">
                        Number of tickets: 
                        {% if order.normalQty and order.normalQty > 0 %}{{ order.normalQty }} Normal{% endif %}
                        {% if order.normalQty and order.normalQty > 0 and order.vipQty and order.vipQty > 0 %} + {% endif %}
                        {% if order.vipQty and order.vipQty > 0 %}{{ order.vipQty }} VIP{% endif %}
                    </h5>
                    <h5 class="text-start">
                        Ticket Type: 
                        {% if order.normalQty and order.normalQty > 0 %}Normal{% endif %}
                        {% if order.normalQty and order.normalQty > 0 and order.vipQty and order.vipQty > 0 %} & {% endif %}
                        {% if order.vipQty and order.vipQty > 0 %}VIP{% endif %}
                    </h5>
                    <h5 class="text-start">Total: ${{ "%.2f"|format(order.totalPrice) }}</h5>
                    <h5 class="text-start">Booked on: {{ order.timeBooked.strftime('%d/%m/%Y at %I:%M %p') }}</h5>
                    
                    <div class="d-grid gap-2 col-11 mx-auto mt-4">
                        <!-- Redirect user to home page -->
                        <a href="{{ url_for('main.index') }}"
                        class="btn btn-light btn-lg "
                        style="background-color: #e7ccff; border: solid 1px; border-color: #cd98fb; z-index: 10">
                        Return to Home
                    </a>
                        <!-- Redirect user to booking history page -->
                    <a href="{{ url_for('main.booking_history') }}"
                        class="btn btn-light btn-lg "
                        style="background-color: #e7ccff; border: solid 1px; border-color: #cd98fb; z-index: 10">
                        See All Bookings
                    </a>
                    </div>
                </div>
            </div>
         </div>
    </div>
</div>

{% endblock %}