{% extends "base.html" %}

{% block head %}
<link rel="stylesheet"  href="{{ url_for('static', filename='style/IndexStyle.css') }}">
{% endblock %}

{% block content %}
<!-- Advertisement Slideshow -->
<div id="eventCarousel" class="carousel slide" data-bs-ride="carousel">
    <!-- Indicators (dots) -->
    <div class="carousel-indicators">
        <button type="button" data-bs-target="#eventCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
        <button type="button" data-bs-target="#eventCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
        <button type="button" data-bs-target="#eventCarousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
        <button type="button" data-bs-target="#eventCarousel" data-bs-slide-to="3" aria-label="Slide 4"></button>
    </div>
    <!-- Slides -->
    <div class="carousel-inner">
        <div class="carousel-item active position-relative">
            <img src="{{ url_for('static', filename='Image/Display events/Twice concert.png') }}" class="d-block w-100">
            <!-- Buy Now button -->
            <a href="{{ url_for('main.demo_event') }}" class="btn btn-light btn-lg slide-button carousel-buy-btn" style="background-color: #e7ccff; border: solid 1px; border-color: #cd98fb; z-index: 10">
                Buy Now
            </a>
        </div>
        <div class="carousel-item position-relative">
            <img src="{{ url_for('static', filename='Image/Display events/SKZ concert.png') }}" class="d-block w-100">
            <!-- Buy Now button -->
            <button class="btn btn-light btn-lg slide-button carousel-buy-btn" style="background-color: #e7ccff; border: solid 1px; border-color: #cd98fb; z-index: 10" data-bs-toggle="modal" data-bs-target="#soldOutModal">
                Buy Now
            </button>
        </div>
        <div class="carousel-item position-relative">
            <img src="{{ url_for('static', filename='Image/Display events/IVE concert.png') }}" class="d-block w-100">
            <!-- Buy Now button -->
            <button class="btn btn-light btn-lg slide-button carousel-buy-btn" style="background-color: #e7ccff; border: solid 1px; border-color: #cd98fb; z-index: 10" data-bs-toggle="modal" data-bs-target="#soldOutModal">
                Buy Now
            </button>
        </div>
        <div class="carousel-item position-relative">
            <img src="{{ url_for('static', filename='Image/Display events/BTS concert.png') }}" class="d-block w-100">
            <!-- Buy Now button overlay -->
            <button class="btn btn-light btn-lg slide-button carousel-buy-btn" style="background-color: #e7ccff; border: solid 1px; border-color: #cd98fb; z-index: 10" data-bs-toggle="modal" data-bs-target="#soldOutModal">
                Buy Now
            </button>
        </div>
        <!-- Sold Out Modal (add this once somewhere in your template) -->
        <div class="modal fade" id="soldOutModal" tabindex="-1" aria-labelledby="soldOutModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="soldOutModalLabel">Ticket Unavailable</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body text-center">
                        <p>Sorry, the tickets for this show are not available.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Controls -->
    <button class="carousel-control-prev" type="button" data-bs-target="#eventCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#eventCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
    </button>
</div>
{% endblock %}

{% block content2 %}
<!-- Page intro -->
<div class="container text-center py-3">
    <div class="row">
        <div class="col-12">
            <h1 class="display-5 mb-0">Welcome to KPOP Event Ticket</h1>
            <p class="lead mb-0">Your ultimate destination for KPOP concerts, fan meetings, and exclusive events worldwide</p>
            <p>Find tickets for your favorite artists, discover new events, and create unforgettable KPOP memories</p>
        </div>
    </div>
</div>
{% endblock %}

{% block content3 %}
<!-- Categories --> 
<div class="container">
    <!-- Add a clear heading -->
    <div class="row">
        <div class="col-12">
            <h3 class="text my-1">Find Events by Location</h3>
        </div>
    </div>
    <div class="row">
        <div class="col-12">
            <div class="d-flex justify-content-start mt-3 gap-5 ps-3"> 
                <!-- All events -->                
                <a href="{{ url_for('main.index') }}#events-section" class="text-decoration-none">
                    <div class="text-center category-item" style="cursor: pointer;">
                        <img src="{{ url_for('static', filename='Image/Category Icons/earth.png') }}" class="category-icon rounded-circle" style="height:50px; width:50px;">
                        <p class="mb-0 mt-2" style="color: black;">All Events</p>
                    </div>
                </a>
                <!-- America -->
                <a href="{{ url_for('main.index') }}?country=america#events-section" class="text-decoration-none">
                    <div class="text-center category-item" style="cursor: pointer;">
                        <img src="{{ url_for('static', filename='Image/Category Icons/united-states.png') }}" class="category-icon rounded-20px" style="height:50px; width:50px;">
                        <p class="mb-0 mt-2" style="color: black">America</p>
                    </div>
                </a>
                <!-- Australia -->
                <a href="{{ url_for('main.index') }}?country=australia#events-section" class="text-decoration-none">
                    <div class="text-center category-item" style="cursor: pointer;">
                        <img src="{{ url_for('static', filename='Image/Category Icons/australia.png') }}" class="category-icon rounded-circle" style="height:50px; width:50px;">
                        <p class="mb-0 mt-2" style="color: black">Australia</p>
                    </div>
                </a>
                <!-- Canada -->
                <a href="{{ url_for('main.index') }}?country=canada#events-section" class="text-decoration-none">
                    <div class="text-center category-item" style="cursor: pointer;">
                        <img src="{{ url_for('static', filename='Image/Category Icons/canada.png') }}" class="category-icon rounded-circle" style="height:50px; width:50px;">
                        <p class="mb-0 mt-2" style="color: black">Canada</p>
                    </div>
                </a>
                <!-- China -->
                <a href="{{ url_for('main.index') }}?country=china#events-section" class="text-decoration-none">
                    <div class="text-center category-item" style="cursor: pointer;">
                        <img src="{{ url_for('static', filename='Image/Category Icons/china.png') }}" class="category-icon rounded-circle" style="height:50px; width:50px;">
                        <p class="mb-0 mt-2" style="color: black">China</p>
                    </div>
                </a>
                <!-- Japan -->
                <a href="{{ url_for('main.index') }}?country=japan#events-section" class="text-decoration-none">
                    <div class="text-center category-item" style="cursor: pointer;">
                        <img src="{{ url_for('static', filename='Image/Category Icons/japan.png') }}" class="category-icon rounded-circle" style="height:50px; width:50px;">
                        <p class="mb-0 mt-2" style="color: black">Japan</p>
                    </div>
                </a>
                <!-- Korea -->
                <a href="{{ url_for('main.index') }}?country=korea#events-section" class="text-decoration-none">
                    <div class="text-center category-item" style="cursor: pointer;">
                        <img src="{{ url_for('static', filename='Image/Category Icons/south-korea.png') }}" class="category-icon rounded-circle" style="height:50px; width:50px;">
                        <p class="mb-0 mt-2" style="color: black">Korea</p>
                    </div>
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block content4 %}
<!-- All events -->
<div class="container my-3" id="events-section">
    <!-- Header with filter dropdown -->
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3 class="mb-0">
            {% if selected_country and selected_country != 'all' %}
                Events in <span style="color: #cd98fb">{{ selected_country.title() }}</span>
            {% else %}
                Upcoming Events
            {% endif %}
        </h3>
        <!-- Status Filter Dropdown -->
        <div class="dropdown">
            <button class="btn" style="width: 160px; background-color: #e7ccff; border-color: #cd98fb" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                {% if selected_status %} 
                    {{ selected_status }}
                {% else %}
                    Event Status
                {% endif %}
                <span style="margin-left: 5px;">â–¼</span>
            </button>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="{{ url_for('main.index') }}{% if selected_country %}?country={{ selected_country }}{% endif %}#events-section">All Statuses</a></li>
                <li><a class="dropdown-item" href="{{ url_for('main.index') }}{% if selected_country %}?country={{ selected_country }}&{% else %}?{% endif %}status=Available#events-section">Available</a></li>
                <li><a class="dropdown-item" href="{{ url_for('main.index') }}{% if selected_country %}?country={{ selected_country }}&{% else %}?{% endif %}status=Sold out#events-section">Sold Out</a></li>
                <li><a class="dropdown-item" href="{{ url_for('main.index') }}{% if selected_country %}?country={{ selected_country }}&{% else %}?{% endif %}status=Cancelled#events-section">Cancelled</a></li>
                <li><a class="dropdown-item" href="{{ url_for('main.index') }}{% if selected_country %}?country={{ selected_country }}&{% else %}?{% endif %}status=Inactive#events-section">Inactive</a></li>
            </ul>
        </div>
    </div>
    <!-- Row with 3-unit gutter between cards -->
    <div class="row g-3">
        <!-- REAL EVENTS FROM DATABASE (show first) -->
        {% for event in events %}
        <div class="col-12 col-md-4 col-lg-3 mb-4">
            <div class="card h-100" style="border: solid 1px; border-color: #cd98fb; border-radius:20px; overflow: hidden">
                <img src="{{ event.image }}" class="card-img-top event-img">
                <div class="card-body d-flex flex-column">
                    <div>
                        <h5 class="card-title text-truncate" title="{{ event.title }}">{{ event.title }}</h5>
                        <p class="card-text text-truncate" style="max-width: 100%;">
                            {{ event.description }}
                        </p>
                    </div>
                    <!-- Buttons row - will stay at bottom -->
                    <div class="mt-auto">
                        <div class="d-flex flex-row flex-md-column flex-lg-row gap-2">
                            <!-- Status Button -->
                            {% if event.status == 'Available' %}
                                <button class="btn btn-outline-success flex-fill" disabled>Available</button>
                            {% elif event.status == 'Sold out' %}
                                <button class="btn btn-outline-info flex-fill" disabled>Sold out</button>
                            {% elif event.status == 'Cancelled' %}
                                <button class="btn btn-outline-danger flex-fill" disabled>Cancelled</button>
                            {% else %}
                                <button class="btn btn-outline-secondary flex-fill" disabled>Inactive</button>
                            {% endif %}
                            <!-- Buy Ticket Button -->
                            {% if event.status == 'Available' %}
                                <a href="{{ url_for('main.event_detail', event_id=event.eventid) }}" class="btn btn-success flex-fill">Buy Tickets</a>
                            {% else %}
                                <button class="btn btn-success flex-fill" disabled>Buy Tickets</button>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
        <!-- EXAMPLE EVENTS (always show after real events) -->
        {% if (not selected_country or selected_country == 'all' or selected_country.lower() == 'australia') and (not selected_status or selected_status == 'Available') %}
        <!-- Event Card 1 - Twice Concert (Australia) -->
        <div class="col-12 col-md-4 col-lg-3 mb-4">
            <div class="card h-100" style="border: solid 1px; border-color: #cd98fb; border-radius:20px; overflow: hidden">
                <img src="{{ url_for('static', filename='Image/Display events/Twice concert.png') }}" class="card-img-top event-img">
                <div class="card-body">
                    <h5 class="card-title">Twice Concert</h5>
                    <p class="card-text" style="max-height: 100px; height: 100px">Twice Concert</p>
                    <!-- Buttons row -->
                    <div class="d-flex flex-row flex-md-column flex-lg-row gap-2">
                        <!-- Status Button -->
                        <button class="btn btn-outline-success flex-fill" disabled>Available</button>
                        <!-- Buy Ticket Button -->
                        <a href="{{ url_for('main.demo_event') }}" class="btn btn-success flex-fill">Buy Tickets</a>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
        {% if (not selected_country or selected_country == 'all' or selected_country.lower() == 'america') and (not selected_status or selected_status == 'Sold out') %}
        <!-- Event Card 2 - IVE Concert (America) -->
        <div class="col-12 col-md-4 col-lg-3 mb-4">
            <div class="card h-100"  style="border: solid 1px; border-color: #cd98fb; border-radius:20px; overflow: hidden">
                <img src="{{ url_for('static', filename='Image/Display events/IVE concert.png') }}" class="card-img-top event-img">
                <div class="card-body">
                    <h5 class="card-title">IVE Concert</h5>
                    <p class="card-text" style="max-height: 100px; height: 100px">IVE Concert</p>
                    <!-- Buttons row -->
                    <div class="d-flex flex-row flex-md-column flex-lg-row gap-2">
                        <!-- Status Button -->
                        <button class="btn btn-outline-info flex-fill" disabled>Sold out</button>
                        <!-- Buy Ticket Button -->
                        <button class="btn btn-success flex-fill" disabled>Buy Tickets</button>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
        {% if (not selected_country or selected_country == 'all' or selected_country.lower() == 'korea') and (not selected_status or selected_status == 'Sold out') %}
        <!-- Event Card 3 - KATSEYE Fansign (Korea) -->
        <div class="col-12 col-md-4 col-lg-3 mb-4">
            <div class="card h-100" style="border: solid 1px; border-color: #cd98fb; border-radius:20px; overflow: hidden">
                <img src="{{ url_for('static', filename='Image/Display events/KATSEYE concert.png') }}" class="card-img-top event-img">
                <div class="card-body">
                    <h5 class="card-title">KATSEYE Fansign</h5>
                    <p class="card-text" style="max-height: 100px; height: 100px">KATSEYE Fansign</p>
                    <!-- Buttons row -->
                    <div class="d-flex flex-row flex-md-column flex-lg-row gap-2">
                        <!-- Status Button -->
                        <button class="btn btn-outline-info flex-fill" disabled>Sold out</button>
                        <!-- Buy Ticket Button -->
                        <button class="btn btn-success flex-fill" disabled>Buy Tickets</button>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
        {% if (not selected_country or selected_country == 'all' or selected_country.lower() == 'korea') and (not selected_status or selected_status == 'Cancelled') %}
        <!-- Event Card 4 - BTS Concert (Korea) -->
        <div class="col-12 col-md-4 col-lg-3 mb-4">
            <div class="card h-100"  style="border: solid 1px; border-color: #cd98fb; border-radius:20px; overflow: hidden">
                <img src="{{ url_for('static', filename='Image/Display events/BTS concert.png') }}" class="card-img-top event-img">
                <div class="card-body">
                    <h5 class="card-title">BTS Concert</h5>
                    <p class="card-text" style="max-height: 100px; height: 100px">BTS Concert</p>
                    <!-- Buttons row -->
                    <div class="d-flex flex-row flex-md-column flex-lg-row gap-2">
                        <!-- Status Button -->
                        <button class="btn btn-outline-danger flex-fill" disabled>Cancelled</button>
                        <!-- Buy Ticket Button -->
                        <button class="btn btn-success flex-fill" disabled>Buy Tickets</button>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
        {% if (not selected_country or selected_country == 'all' or selected_country.lower() == 'japan') and (not selected_status or selected_status == 'Cancelled') %}
        <!-- Event Card 5 - NEWJEANS Fansign (Japan) -->
        <div class="col-12 col-md-4 col-lg-3 mb-4">
            <div class="card h-100"  style="border: solid 1px; border-color: #cd98fb; border-radius:20px; overflow: hidden">
                <img src="{{ url_for('static', filename='Image/Display events/NEWJEANS concert.png') }}" class="card-img-top event-img">
                <div class="card-body">
                    <h5 class="card-title">NEWJEANS Fansign</h5>
                    <p class="card-text" style="max-height: 100px; height: 100px">NEWJEANS Fansign</p>
                    <!-- Buttons row -->
                    <div class="d-flex flex-row flex-md-column flex-lg-row gap-2">
                        <!-- Status Button -->
                        <button class="btn btn-outline-danger flex-fill" disabled>Cancelled</button>
                        <!-- Buy Ticket Button -->
                        <button class="btn btn-success flex-fill" disabled>Buy Tickets</button>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
        {% if (not selected_country or selected_country == 'all' or selected_country.lower() == 'america') and (not selected_status or selected_status == 'Inactive') %}
        <!-- Event Card 6 - SKZ Concert (America) -->
        <div class="col-12 col-md-4 col-lg-3 mb-4">
            <div class="card h-100"  style="border: solid 1px; border-color: #cd98fb; border-radius:20px; overflow: hidden">
                <img src="{{ url_for('static', filename='Image/Display events/SKZ concert.png') }}" class="card-img-top event-img">
                <div class="card-body">
                    <h5 class="card-title">SKZ Concert</h5>
                    <p class="card-text" style="max-height: 100px; height: 100px">SKZ Concert</p>
                    <!-- Buttons row -->
                    <div class="d-flex flex-row flex-md-column flex-lg-row gap-2">
                        <!-- Status Button -->
                        <button class="btn btn-outline-secondary flex-fill" disabled>Inactive</button>
                        <!-- Buy Ticket Button -->
                        <button class="btn btn-success flex-fill" disabled>Buy Tickets</button>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
        {% if (not selected_country or selected_country == 'china' or selected_country.lower() == 'all') and (not selected_status or selected_status == 'Inactive') %}
        <!-- Event Card 7 - EXO Fanmeeting (China) -->
        <div class="col-12 col-md-4 col-lg-3 mb-4">
            <div class="card h-100"  style="border: solid 1px; border-color: #cd98fb; border-radius:20px; overflow: hidden">
                <img src="{{ url_for('static', filename='Image/Display events/EXO concert.png') }}" class="card-img-top event-img">
                <div class="card-body">
                    <h5 class="card-title">EXO Fanmeeting</h5>
                    <p class="card-text" style="max-height: 100px; height: 100px">EXO Fanmeeting</p>
                    <!-- Buttons row -->
                    <div class="d-flex flex-row flex-md-column flex-lg-row gap-2">
                        <!-- Status Button -->
                        <button class="btn btn-outline-secondary flex-fill" disabled>Inactive</button>
                        <!-- Buy Ticket Button -->
                        <button class="btn btn-success flex-fill" disabled>Buy Tickets</button>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
        <!-- Create Events -->
        <div class="col-12 col-md-4 col-lg-3 mb-4">
            <div class="card h-100"  style="border: solid 1px; border-color: #cd98fb; border-radius:20px; overflow: hidden">
                <a href="{{ url_for('create.create') }}">
                    <img src="{{ url_for('static', filename='Image/more.png') }}" class="card-img-top" style="height: 125px; object-fit: contain; padding-top: 20px">
                </a>
                <div class="card-body text-center">
                    <h5 class="card-title">Create your own event!</h5>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

